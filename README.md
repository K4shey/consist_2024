# Создание асинхронного REST API, реализация микросервисных тестов

## Цель

Создать асинхронное рест апи, по вычислению строки на калькуляторе(очень сложные и долгие вычисления). Результаты
вычислений могут логироваться в вашей gitlab задаче в виде комментариев при особом желании пользователя.Помимо
стандартного набора UnitTest-ов и компонентых тестов, работу сервиса должен проверять микросервисный тест, написанный по
принципу смоук.Калькулятор - это отдельный ваш библиотечный класс, который принимает на вход строку вида "2+2" и выдает
результат, например "4"

- UPD: ещё один момент, с токеном и прочими настройками приложения. Вот взяли вы spring-boot - нужно разобраться как в
  spring-boot жить с настройками. В идеале, сделайте jar и передайте в него другие настройки. Добавляйте теперь скрин
  такого запуска мне в PR.
- UPD2: Приложите скрины из postman вашего вызова в PR.
- UPD3: Было непонимание - что такое асинхрон. Поэтому уточнение, считайте - что калькулятор - это очень долгое
  вычисление. Дольше стандартного таймаута. Докиньте настройку задержки, сделайте её минуты 3.

## Использованные технологии

- Java 17
- Spring boot 3
- JUnit 5
- Mockito
- Maven
- MapStruct 1.5.5

## Тестирование

В проекте реализовано микросервисное тестирование, помимо компонентных и модульных тестов.

## Установка и запуск

- Выполните клонирование репозитория: `git clone https://gitlab.com/ваш_репозиторий.git`
- Откройте проект в вашей среде разработки (например, IntelliJ IDEA).
- Укажите токен авторизации пользователя в файле `application.properties`.
- Либо укажите токен в параметрах при запуске
  приложения: `java -jar task3-0.0.1-snapshot.jar --gitlab.token=ваш токен авторизации`
- Запустите приложение.
- Выполнив POST запрос на URL `/api/calcrequest` в параметр `expr` нужно передать выражение для вычисления. Например:`/api/calcrequest?expr=2+2`. Если нужно логирование в комментариях задачи, то дополнительно указываем параметр `needlog`. Например: `/api/calcrequest?expr=4+6&needlog=true`. В заголовке `Location` будет возвращён URL, содержащий id созданного выражения.
- Для получения результата вычисления нужно выполнить GET запрос с указанием id выражения в URL. Например: `/api/calcrequest/2`. Если результат на момент запроса посчитан, то он будет возвращен в теле ответа. Иначе в статусе ответа будет информация, что выражение с требуемым id находится в обработке.   
- Сформировав GET запрос на URL `/api/calcrequest` можно получить список всех выражений, с указанием их id и текущего статуса.
- Сформировав DELETE запрос на URL `/api/calcrequest/{id}` можно удалить выражение с указанным id. Если нужно логирование в комментариях задачи, то дополнительно указываем параметр `needlog`.
- Сформировав PUT запрос на URL `/api/calcrequest/{id}` можно обновить выражение для вычисления, при условии что статус выражения `COMLPLETED`. Обновленное выражение отправляется для вычисления. Если нужно логирование в комментариях задачи, то дополнительно указываем параметр `needlog`.
